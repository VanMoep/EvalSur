(this["webpackJsonpcreate-new-map-react-leaflet"]=this["webpackJsonpcreate-new-map-react-leaflet"]||[]).push([[0],{110:function(e,a,t){e.exports=t(168)},115:function(e,a,t){},116:function(e,a,t){},168:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(11),o=t.n(s),l=(t(115),t(37)),i=t(38),c=t(31),p=t(41),m=t(40),u=t(67),h=t(58),g=t(68),d=t(3),y=t.n(d),f=(t(116),t(117),t(118),t(119),t(64)),E=t(65),b=t(66),O=t(72),v=t.n(O),k=t(73),w=t.n(k),x=t(81),M=t.n(x),C=t(87),S=t.n(C),D=t(82),P=t.n(D),T=t(86),j=t.n(T),A=t(84),B=t.n(A),R=t(88),I=t.n(R),L=t(80),z=t.n(L),N=t(79),_=t.n(N),F=t(85),q=t.n(F),V=t(83),Z=t.n(V),J=t(78),G=t.n(J),H=t(89),Q=t.n(H),U=t(90),Y=t.n(U),K=t(52),W=t.n(K),X=t(92),$=t.n(X),ee=t(94),ae=t.n(ee),te=t(96),ne=t.n(te),re=t(62),se=t.n(re),oe=t(93),le=t.n(oe),ie=t(97),ce=t.n(ie),pe=t(98),me=t.n(pe),ue=t(91),he=t.n(ue),ge=t(95),de=t.n(ge),ye=function(e){switch(e){case"position":return r.a.createElement(w.a,{style:{color:fe(e)}});case"bakery":return r.a.createElement(G.a,{style:{color:fe(e),margin:"2px"}});case"college":return r.a.createElement(_.a,{style:{color:fe(e),margin:"2px"}});case"kindergarten":return r.a.createElement(z.a,{style:{color:fe(e),margin:"2px"}});case"school":return r.a.createElement(M.a,{style:{color:fe(e),margin:"2px"}});case"supermarket":return r.a.createElement(P.a,{style:{color:fe(e),margin:"2px"}});case"swimming":return r.a.createElement(Z.a,{style:{color:fe(e),margin:"2px"}});case"cinema":return r.a.createElement(B.a,{style:{color:fe(e),margin:"2px"}});case"playground":return r.a.createElement(q.a,{style:{color:fe(e),margin:"2px"}});case"park":return r.a.createElement(j.a,{style:{color:fe(e),margin:"2px"}});case"pharmacy":return r.a.createElement(S.a,{style:{color:fe(e),margin:"2px"}});case"chemist":return r.a.createElement(I.a,{style:{color:fe(e),margin:"2px"}});case"unknown":return r.a.createElement(Q.a,{style:{color:fe(e),margin:"2px"}});default:return r.a.createElement(Y.a,{style:{color:fe(e),margin:"2px"}})}},fe=function(e){switch(e){case"position":return he.a[500];case"bakery":return $.a[500];case"supermarket":return le.a[500];case"swimming":return W.a[500];case"cinema":return ae.a[500];case"playground":return de.a[500];case"park":return W.a[500];case"pharmacy":return ne.a[500];case"unknown":return se.a[500];case"school":return ce.a[500];case"kindergarten":return me.a[500];default:return se.a[900]}},Ee=function(e){Object(p.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).getIconForType=n.getIconForType.bind(Object(c.a)(n)),n}return Object(i.a)(t,[{key:"getIconForType",value:function(e){return y.a.divIcon({className:"custom-icon",html:v.a.renderToString(ye(e))})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.props.osmData.map((function(a,t){return r.a.createElement(f.a,{key:"marker-".concat(t),position:[a.lat,a.lon],icon:e.getIconForType(a.type)},r.a.createElement(E.a,null,r.a.createElement("span",null,a.type),":",r.a.createElement("span",null,a.name)))})),r.a.createElement(b.a,{center:{lat:this.props.center[0],lng:this.props.center[1]},fillColor:"blue",radius:this.props.radius}),r.a.createElement(f.a,{key:"marker-position",position:[this.props.center[0],this.props.center[1]],icon:this.getIconForType("position")}))}}]),t}(r.a.Component),be=t(198),Oe=t(195),ve=t(201),ke=t(101),we=t.n(ke),xe=t(196),Me=t(197),Ce=t(99),Se=t.n(Ce),De=function(e){Object(p.a)(t,e);var a=Object(m.a)(t);function t(e){return Object(l.a)(this,t),a.call(this,e)}return Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.props.loading?r.a.createElement(Oe.a,{style:{padding:"5px"}},r.a.createElement(xe.a,{container:!0,spacing:3},r.a.createElement(xe.a,{item:!0,xs:2},r.a.createElement(Se.a,null)),r.a.createElement(xe.a,{item:!0,xs:10},r.a.createElement(Me.a,{align:"center"},"loading OSM data")))):Object.getOwnPropertyNames(this.props.osmData).length>0?r.a.createElement(Oe.a,{style:{padding:"10px"}},Object.keys(this.props.osmData).map((function(a){return r.a.createElement(ve.a,{title:a,"aria-label":a},r.a.createElement(be.a,{badgeContent:e.props.osmData[a],style:{color:fe(a)}},ye(a)))}))):this.props.osmError?r.a.createElement(Oe.a,{style:{padding:"5px"}},r.a.createElement(xe.a,{container:!0,spacing:3},r.a.createElement(xe.a,{item:!0,xs:2},r.a.createElement(we.a,{color:"error"})),r.a.createElement(xe.a,{item:!0,xs:10},r.a.createElement(Me.a,{align:"center",color:"error"},this.props.osmError.message)))):r.a.createElement(r.a.Fragment,null)}}]),t}(r.a.Component),Pe=t(55),Te=t.n(Pe),je=t(103),Ae=t.n(je),Be=t(104),Re=t.n(Be),Ie=t(199),Le=t(102),ze=t(202),Ne=(t(127),t(200)),_e=function(e){Object(p.a)(n,e);var a=Object(m.a)(n);function n(){var e;return Object(l.a)(this,n),(e=a.call(this)).leafletMap=null,e.setLeafletMapRef=function(a){return e.leafletMap=a&&a.leafletElement},e.state={defaultZoom:13,defaultCenter:[0,9],osmRequest:null,defaultRange:1500,osmData:[],osmDataCounted:{},loading:!1},e.loadOSMData=e.loadOSMData.bind(Object(c.a)(e)),e.getTypeByTags=e.getTypeByTags.bind(Object(c.a)(e)),e.handleRangeChange=e.handleRangeChange.bind(Object(c.a)(e)),e}return Object(i.a)(n,[{key:"loadOSMData",value:function(){var e=this;this.setState({loading:!0,osmError:null});var a=t(128),n=this.state.osmRequest;n=n.replaceAll("<RANGE>",this.state.defaultRange).replaceAll("<LAT>",this.leafletMap.getCenter().lat).replaceAll("<LON>",this.leafletMap.getCenter().lng),console.log("requesting OSM data for position",this.leafletMap.getCenter(),n),a(n).then((function(a){var t=[],n={};a.filter((function(e){return("node"===e.type||"way"===e.type)&&e.lat&&e.tags})).map((function(a,r){var s=e.getTypeByTags(a.tags);t.push({name:a.tags.name,lat:"node"===a.type?a.lat:a.center.lat,lon:"node"===a.type?a.lon:a.center.lon,type:s}),n.hasOwnProperty(s)?n[s]=n[s]+1:n[s]=1})),e.setState({osmData:t,osmDataCounted:n,loading:!1,osmError:null})})).catch((function(a){e.setState({loading:!1,osmError:a})}))}},{key:"getTypeByTags",value:function(e){return e.hasOwnProperty("shop")&&"bakery"===e.shop?"bakery":e.hasOwnProperty("shop")&&"supermarket"===e.shop?"supermarket":e.hasOwnProperty("shop")&&"chemist"===e.shop?"chemist":e.hasOwnProperty("amenity")&&"cinema"===e.amenity?"cinema":e.hasOwnProperty("sport")&&"swimming"===e.sport?"swimming":e.hasOwnProperty("amenity")&&"pharmacy"===e.amenity?"pharmacy":e.hasOwnProperty("amenity")&&"ice_cream"===e.amenity?"ice_cream":e.hasOwnProperty("amenity")&&"school"===e.amenity?"school":e.hasOwnProperty("amenity")&&"college"===e.amenity?"college":e.hasOwnProperty("amenity")&&"kindergarten"===e.amenity?"kindergarten":e.hasOwnProperty("leisure")&&"park"===e.leisure?"park":e.hasOwnProperty("leisure")&&"playground"===e.leisure?"playground":"unknown"}},{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(a){e.setState({defaultCenter:[a.coords.latitude,a.coords.longitude]})})),fetch("data/overpassQL.txt").then((function(a){return a.text().then((function(a){console.log(a),e.setState({osmRequest:a})}))}))}},{key:"handleRangeChange",value:function(e,a){this.setState({defaultRange:a})}},{key:"valuetext",value:function(e){return"".concat(e,"km")}},{key:"render",value:function(){var e=this,a=[{value:500,label:"0.5 km"},{value:1500,label:"1.5 km"},{value:3e3,label:"3 km"}];return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{ref:this.setLeafletMapRef,fullscreenControl:!0,center:this.state.defaultCenter,zoom:this.state.defaultZoom},r.a.createElement(h.b,{position:"topright"},r.a.createElement(h.b.BaseLayer,{checked:!0,name:"CartoDB.VoyagerLabelsUnder"},r.a.createElement(g.a,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{checked:!0,name:"CartoDB.Positron"},r.a.createElement(g.a,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]',subdomains:"abcd"})),r.a.createElement(h.b.BaseLayer,{name:"OpenStreetMap.BZH"},r.a.createElement(g.a,{url:"https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles courtesy of <a href="http://www.openstreetmap.bzh/" target="_blank">Breton OpenStreetMap Team</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"OpenStreetMap.Mapnik"},r.a.createElement(g.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"Stamen.Toner"},r.a.createElement(g.a,{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> \u2014 Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]',subdomains:"abcd",ext:"png"})),r.a.createElement(h.b.BaseLayer,{name:"Stadia.AlidadeSmooth"},r.a.createElement(g.a,{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"Stadia.AlidadeSmoothDark"},r.a.createElement(g.a,{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'}))),r.a.createElement(Ee,{osmData:this.state.osmData,center:this.state.defaultCenter,radius:this.state.defaultRange}),r.a.createElement(Te.a,{position:"topleft"},r.a.createElement(Ie.a,{size:"small",onClick:function(){navigator.geolocation.getCurrentPosition((function(a){e.leafletMap.setView([a.coords.latitude,a.coords.longitude])}))}},r.a.createElement(Ae.a,null))),r.a.createElement(Te.a,{position:"topleft"},r.a.createElement(Le.a,{trigger:r.a.createElement(Ie.a,{size:"small"},r.a.createElement(Re.a,null)),modal:!0,nested:!0},(function(t){return r.a.createElement("div",{className:"modal"},r.a.createElement("button",{className:"close",onClick:t},"\xd7"),r.a.createElement("div",{className:"header"}," select search radius "),r.a.createElement("div",{className:"content"}," ",r.a.createElement(xe.a,{container:!0,spacing:2},r.a.createElement(xe.a,{item:!0}),r.a.createElement(xe.a,{item:!0,xs:!0},r.a.createElement(Me.a,{id:"discrete-slider-always",gutterBottom:!0}),r.a.createElement(ze.a,{value:e.state.defaultRange,onChange:e.handleRangeChange,"aria-labelledby":"discrete-slider-always",step:500,defaultValue:1500,min:500,max:3e3,marks:a,getAriaValueText:e.valuetext,valueLabelDisplay:"on"})),r.a.createElement(xe.a,{item:!0}))),r.a.createElement("div",{className:"actions"},r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(){e.loadOSMData(),t()}},"load")))}))),r.a.createElement(Te.a,{position:"bottomleft"},r.a.createElement(De,{osmData:this.state.osmDataCounted,loading:this.state.loading,osmError:this.state.osmError}))))}}]),n}(r.a.Component);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_e,null)),document.getElementById("root"))}},[[110,1,2]]]);
//# sourceMappingURL=main.bff3295f.chunk.js.map