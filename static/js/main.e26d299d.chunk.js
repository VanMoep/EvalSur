(this["webpackJsonpcreate-new-map-react-leaflet"]=this["webpackJsonpcreate-new-map-react-leaflet"]||[]).push([[0],{130:function(e,t,a){e.exports=a(185)},135:function(e,t,a){},136:function(e,t,a){},185:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),l=a.n(o),s=(a(135),a(43)),i=a(44),c=a(30),p=a(47),m=a(46),u=a(90),h=a(73),d=a(91),g=(a(136),a(137),a(87)),y=a(88),f=a(89),E=a(4),b=a.n(E),O=a(95),C=a.n(O),v=a(111),w=a.n(v),k=a(103),M=a.n(k),S=a(109),D=a.n(S),x=a(104),P=a.n(x),R=a(108),j=a.n(R),A=a(106),I=a.n(A),q=a(110),L=a.n(q),T=a(102),B=a.n(T),z=a(101),_=a.n(z),F=a(107),N=a.n(F),V=a(105),Z=a.n(V),G=a(96),H=a.n(G),J=a(113),U=a.n(J),Y=a(114),K=a.n(Y),Q=a(48),W=a.n(Q),X=a(77),$=a.n(X),ee=a(81),te=a.n(ee),ae=a(54),ne=a.n(ae),re=a(66),oe=a.n(re),le=a(80),se=a.n(le),ie=a(79),ce=a.n(ie),pe=a(78),me=a.n(pe),ue=a(83),he=a.n(ue),de=a(82),ge=a.n(de),ye=a(112),fe=a.n(ye),Ee={bakery:{icon:r.a.createElement(H.a,{style:{color:$.a[500],margin:"2px"}}),color:$.a[500],tags:function(e){return e.hasOwnProperty("shop")&&"bakery"===e.shop},query:'["shop"="bakery"]'},college:{icon:r.a.createElement(_.a,{style:{color:oe.a[900],margin:"2px"}}),color:oe.a[900],tags:function(e){return e.hasOwnProperty("amenity")&&"college"===e.amenity},query:'["amenity"="college"]'},kindergarten:{icon:r.a.createElement(B.a,{style:{color:me.a[500],margin:"2px"}}),color:me.a[500],tags:function(e){return e.hasOwnProperty("amenity")&&"kindergarten"===e.amenity},query:'["amenity"="kindergarten"]'},school:{icon:r.a.createElement(M.a,{style:{color:ce.a[500],margin:"2px"}}),color:ce.a[500],tags:function(e){return e.hasOwnProperty("amenity")&&"school"===e.amenity},query:'["amenity"="school"]'},supermarket:{icon:r.a.createElement(P.a,{style:{color:se.a[500],margin:"2px"}}),color:se.a[500],tags:function(e){return e.hasOwnProperty("shop")&&"supermarket"===e.shop},query:'["shop"="supermarket"]'},swimming:{icon:r.a.createElement(Z.a,{style:{color:W.a[500],margin:"2px"}}),color:W.a[500],tags:function(e){return e.hasOwnProperty("sport")&&"swimming"===e.sport},query:'["sport"="swimming"]'},cinema:{icon:r.a.createElement(I.a,{style:{color:te.a[500],margin:"2px"}}),color:te.a[500],tags:function(e){return e.hasOwnProperty("amenity")&&"cinema"===e.amenity},query:'["amenity"="cinema"]'},playground:{icon:r.a.createElement(N.a,{style:{color:ge.a[500],margin:"2px"}}),color:ge.a[500],tags:function(e){return e.hasOwnProperty("leisure")&&"playground"===e.leisure},query:'["leisure"="playground"] ["access"!="private"]'},park:{icon:r.a.createElement(j.a,{style:{color:W.a[500],margin:"2px"}}),color:W.a[500],tags:function(e){return e.hasOwnProperty("leisure")&&"park"===e.leisure},query:'["leisure"="park"]'},pharmacy:{icon:r.a.createElement(D.a,{style:{color:ne.a[500],margin:"2px"}}),color:ne.a[500],tags:function(e){return e.hasOwnProperty("amenity")&&"pharmacy"===e.amenity},query:'["amenity"="pharmacy"]'},chemist:{icon:r.a.createElement(L.a,{style:{color:ne.a[100],margin:"2px"}}),color:ne.a[100],tags:function(e){return e.hasOwnProperty("shop")&&"chemist"===e.shop},query:'["shop"="chemist"]'}},be=function(e){var t="[timeout:25] [out:json] ; (";return e.forEach((function(e){t+="\n  nwr "+Ee[e].query+" (around:<RANGE>,<LAT>,<LON>);"})),t+=");  out center;  >; out skel qt;"},Oe=function(e){return"position"===e?r.a.createElement(w.a,{style:{color:Ce(e)}}):"center"===e?r.a.createElement(fe.a,{style:{color:Ce(e)}}):"unknown"===e?r.a.createElement(U.a,{style:{color:Ce(e),margin:"2px"}}):Ee.hasOwnProperty(e)?Ee[e].icon:r.a.createElement(K.a,{style:{color:Ce(e),margin:"2px"}})},Ce=function(e){return"position"===e||"center"===e?he.a[500]:Ee.hasOwnProperty(e)?Ee[e].color:oe.a[900]},ve=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getIconForType=n.getIconForType.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"getIconForType",value:function(e){return b.a.divIcon({className:"custom-icon",html:C.a.renderToString(Oe(e))})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.props.osmData.map((function(t,a){return r.a.createElement(g.a,{key:"marker-".concat(a),position:[t.lat,t.lon],icon:e.getIconForType(t.type)},r.a.createElement(y.a,null,r.a.createElement("span",null,t.type),":",r.a.createElement("span",null,t.name)))})),r.a.createElement(f.a,{center:{lat:this.props.searchCenter[0],lng:this.props.searchCenter[1]},fillColor:"blue",radius:this.props.radius}),r.a.createElement(g.a,{key:"marker-searchCenter",position:[this.props.searchCenter[0],this.props.searchCenter[1]],icon:this.getIconForType("position")}),r.a.createElement(g.a,{key:"marker-mapCenter",position:[this.props.mapCenter[0],this.props.mapCenter[1]],icon:this.getIconForType("center")}))}}]),a}(r.a.Component),we=a(187),ke=a(121),Me=a.n(ke),Se=a(232),De=a(55),xe=a(120),Pe=a.n(xe),Re=a(65),je=a(238),Ae=a(224),Ie=a(225),qe=a(226),Le=a(227),Te=a(228),Be=a(230),ze=a(231),_e=a(221),Fe=a(116),Ne=a.n(Fe),Ve=a(239),Ze=a(241),Ge=a(229),He=a(223),Je=a(117),Ue=a.n(Je),Ye=a(118),Ke=a.n(Ye),Qe=a(119),We=a.n(Qe),Xe=Object(_e.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}}));function $e(e){var t=e.osmDataCounted,a=e.osmData,n=e.range,o=Xe(),l=r.a.useState(!1),s=Object(Re.a)(l,2),i=s[0],c=s[1],p=function(){c(!1)};return r.a.createElement("div",null,r.a.createElement(we.a,{onClick:function(){c(!0)},style:{padding:"10px"}},Object.keys(t).map((function(e){return r.a.createElement(Ve.a,{key:"tooltip-".concat(e),title:e,"aria-label":e},r.a.createElement(He.a,{badgeContent:t[e],style:{color:Ce(e)}},Oe(e)))}))),r.a.createElement(je.a,{fullScreen:!0,open:i,onClose:p},r.a.createElement(Ae.a,{className:o.appBar},r.a.createElement(Ie.a,null,r.a.createElement(qe.a,{edge:"start",color:"inherit",onClick:p,"aria-label":"close"},r.a.createElement(Ne.a,null)),r.a.createElement(De.a,{variant:"h6",className:o.title},"POIs within ",n,"m range"))),r.a.createElement(Le.a,{dense:!0},a.map((function(e,t){return r.a.createElement(Te.a,{alignItems:"flex-start",key:"listitem-".concat(t)},r.a.createElement(Ge.a,null,r.a.createElement(Ze.a,null,Oe(e.type))),r.a.createElement(Be.a,{primary:e.name,secondary:e.address.street+" "+e.address.housenumber+", "+e.address.postcode+" "+e.address.city}),r.a.createElement(ze.a,null,r.a.createElement(qe.a,{color:"primary",disabled:!e.phone,onClick:function(){return window.open("tel:"+e.phone,"_blank")}},r.a.createElement(Ue.a,null))),r.a.createElement(ze.a,null,r.a.createElement(qe.a,{color:"primary",disabled:!e.website,onClick:function(){return window.open(e.website,"_blank")}},r.a.createElement(Ke.a,null))),r.a.createElement(ze.a,null,r.a.createElement(qe.a,{color:"primary",onClick:function(){return window.open("https://www.google.com/maps/dir/?api=1&destination="+e.lat+"%2C"+e.lon,"_blank")}},r.a.createElement(We.a,null))))})))))}var et=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return this.props.loading?r.a.createElement(we.a,{style:{padding:"5px"}},r.a.createElement(Se.a,{container:!0,spacing:3},r.a.createElement(Se.a,{item:!0,xs:2},r.a.createElement(Pe.a,null)),r.a.createElement(Se.a,{item:!0,xs:10},r.a.createElement(De.a,{align:"center"},"loading OSM data")))):Object.getOwnPropertyNames(this.props.osmDataCounted).length>0?r.a.createElement($e,{osmDataCounted:this.props.osmDataCounted,osmData:this.props.osmData,range:this.props.range}):this.props.osmError?r.a.createElement(we.a,{style:{padding:"5px"}},r.a.createElement(Se.a,{container:!0,spacing:3},r.a.createElement(Se.a,{item:!0,xs:2},r.a.createElement(Me.a,{color:"error"})),r.a.createElement(Se.a,{item:!0,xs:10},r.a.createElement(De.a,{align:"center",color:"error"},this.props.osmError.message)))):r.a.createElement(r.a.Fragment,null)}}]),a}(r.a.Component),tt=a(67),at=a.n(tt),nt=a(123),rt=a.n(nt),ot=a(233),lt=a(237),st=a(236),it=a(235),ct=a(234),pt=a(122),mt=a.n(pt),ut=a(240);function ht(e){var t=e.defaultRange,a=e.handleRangeChange,n=e.loadOSMData,o=r.a.useState(!1),l=Object(Re.a)(o,2),s=l[0],i=l[1],c=function(){i(!1)};return r.a.createElement("div",null,r.a.createElement(ot.a,{size:"small",onClick:function(){i(!0)}},r.a.createElement(mt.a,null)),r.a.createElement(je.a,{open:s,onClose:c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ct.a,{id:"alert-dialog-title"},"set range to search for POIs"),r.a.createElement(it.a,null,r.a.createElement(Se.a,{container:!0,spacing:2},r.a.createElement(Se.a,{item:!0}),r.a.createElement(Se.a,{item:!0,xs:!0},r.a.createElement(De.a,{id:"discrete-slider-always",gutterBottom:!0}),r.a.createElement(ut.a,{value:t,onChange:a,"aria-labelledby":"discrete-slider-always",step:500,defaultValue:1500,min:500,max:3e3,marks:[{value:500,label:"0.5 km"},{value:1500,label:"1.5 km"},{value:3e3,label:"3 km"}],getAriaValueText:function(e){return"".concat(e,"km")},valueLabelDisplay:"off"})),r.a.createElement(Se.a,{item:!0}))),r.a.createElement(st.a,null,r.a.createElement(lt.a,{onClick:c},"Cancel"),r.a.createElement(lt.a,{onClick:function(){i(!1),n()},color:"primary",autoFocus:!0},"Load"))))}var dt=a(84),gt=(a(145),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).leafletMap=null,e.setLeafletMapRef=function(t){return e.leafletMap=t&&t.leafletElement},e.state={defaultZoom:13,defaultCenter:[0,9],osmRequest:null,defaultRange:1500,osmData:[],osmDataCounted:{},loading:!1},e.loadOSMData=e.loadOSMData.bind(Object(c.a)(e)),e.handleRangeChange=e.handleRangeChange.bind(Object(c.a)(e)),e.handleMove=e.handleMove.bind(Object(c.a)(e)),e.handleOSMResponse=e.handleOSMResponse.bind(Object(c.a)(e)),e}return Object(i.a)(n,[{key:"loadOSMData",value:function(){var e=this;this.setState({loading:!0,osmError:null});var t=a(146),n=this.state.osmRequest;n=n.replaceAll("<RANGE>",this.state.defaultRange).replaceAll("<LAT>",this.leafletMap.getCenter().lat).replaceAll("<LON>",this.leafletMap.getCenter().lng),console.log("requesting OSM data for position",this.leafletMap.getCenter(),n),t(n).then((function(t){e.handleOSMResponse(t)})).catch((function(t){e.setState({loading:!1,osmError:t})}))}},{key:"handleOSMResponse",value:function(e){var t=[],a={};e.filter((function(e){return("node"===e.type||"way"===e.type)&&e.lat&&e.tags})).map((function(e,n){var r=function(e){var t="unknown";return Object.keys(Ee).forEach((function(a){Ee[a].tags(e)&&(t=a)})),t}(e.tags);t.push({name:e.tags.name,lat:"node"===e.type?e.lat:e.center.lat,lon:"node"===e.type?e.lon:e.center.lon,type:r,address:{city:e.tags["addr:city"],housenumber:e.tags["addr:housenumber"],postcode:e.tags["addr:postcode"],street:e.tags["addr:street"]},openingHours:e.tags.opening_hours,website:e.tags.website,phone:e.tags.phone}),a.hasOwnProperty(r)?a[r]=a[r]+1:a[r]=1})),this.setState({osmData:t,osmDataCounted:a,loading:!1,osmError:null,defaultCenter:[this.leafletMap.getCenter().lat,this.leafletMap.getCenter().lng]})}},{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){e.setState({defaultCenter:[t.coords.latitude,t.coords.longitude]})})),this.setState({osmRequest:be(Object.keys(Ee))});var t=new dt.b({provider:new dt.a,style:"bar",showMarker:!1});this.leafletMap.addControl(t)}},{key:"handleRangeChange",value:function(e,t){this.setState({defaultRange:t})}},{key:"handleMove",value:function(e){this.setState({mapCenter:[e.target.getCenter().lat,e.target.getCenter().lng]})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{ref:this.setLeafletMapRef,center:this.state.defaultCenter,zoom:this.state.defaultZoom,onMove:this.handleMove},r.a.createElement(h.b,{position:"topright"},r.a.createElement(h.b.BaseLayer,{checked:!0,name:"CartoDB.VoyagerLabelsUnder"},r.a.createElement(d.a,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{checked:!0,name:"CartoDB.Positron"},r.a.createElement(d.a,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]',subdomains:"abcd"})),r.a.createElement(h.b.BaseLayer,{name:"OpenStreetMap.BZH"},r.a.createElement(d.a,{url:"https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles courtesy of <a href="http://www.openstreetmap.bzh/" target="_blank">Breton OpenStreetMap Team</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"OpenStreetMap.Mapnik"},r.a.createElement(d.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"Stamen.Toner"},r.a.createElement(d.a,{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> \u2014 Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]',subdomains:"abcd",ext:"png"})),r.a.createElement(h.b.BaseLayer,{name:"Stadia.AlidadeSmooth"},r.a.createElement(d.a,{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"Stadia.AlidadeSmoothDark"},r.a.createElement(d.a,{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'}))),r.a.createElement(ve,{osmData:this.state.osmData,searchCenter:this.state.defaultCenter,mapCenter:this.state.mapCenter?this.state.mapCenter:this.state.defaultCenter,radius:this.state.defaultRange}),r.a.createElement(at.a,{position:"topleft"},r.a.createElement(ot.a,{size:"small",onClick:function(){navigator.geolocation.getCurrentPosition((function(t){e.leafletMap.setView([t.coords.latitude,t.coords.longitude])}))}},r.a.createElement(rt.a,null))),r.a.createElement(at.a,{position:"topleft"},r.a.createElement(ht,{defaultRange:this.state.defaultRange,handleRangeChange:this.handleRangeChange,loadOSMData:this.loadOSMData})),r.a.createElement(at.a,{position:"bottomleft"},r.a.createElement(et,{osmDataCounted:this.state.osmDataCounted,osmData:this.state.osmData,loading:this.state.loading,osmError:this.state.osmError,range:this.state.defaultRange}))))}}]),n}(r.a.Component));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(gt,null)),document.getElementById("root"))}},[[130,1,2]]]);
//# sourceMappingURL=main.e26d299d.chunk.js.map