(this["webpackJsonpcreate-new-map-react-leaflet"]=this["webpackJsonpcreate-new-map-react-leaflet"]||[]).push([[0],{100:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(11),s=a.n(o),l=(a(99),a(31)),i=a(32),p=a(27),c=a(35),m=a(34),u=a(61),h=a(53),y=a(62),g=a(3),d=a.n(g),f=(a(100),a(101),a(102),a(103),a(104),a(59)),b=a(60),E=a(66),O=a.n(E),w=a(74),v=a.n(w),k=a(79),M=a.n(k),S=a(75),x=a.n(S),D=a(78),P=a.n(D),T=a(77),C=a.n(T),B=a(80),A=a.n(B),j=a(73),I=a.n(j),L=a(72),z=a.n(L),R=a(76),_=a.n(R),F=a(67),N=a.n(F),q=a(81),Z=a.n(q),J=a(82),V=a.n(J),G=a(47),H=a.n(G),Q=a(83),U=a.n(Q),Y=a(85),K=a.n(Y),W=a(86),X=a.n(W),$=a(57),ee=a.n($),te=a(84),ae=a.n(te),re=a(87),ne=a.n(re),oe=a(88),se=a.n(oe),le=function(e){switch(e){case"bakery":return n.a.createElement(N.a,{style:{color:ie(e),margin:"2px"}});case"college":return n.a.createElement(z.a,{style:{color:ie(e),margin:"2px"}});case"kindergarten":return n.a.createElement(I.a,{style:{color:ie(e),margin:"2px"}});case"school":return n.a.createElement(v.a,{style:{color:ie(e),margin:"2px"}});case"supermarket":return n.a.createElement(x.a,{style:{color:ie(e),margin:"2px"}});case"swimming":return n.a.createElement(_.a,{style:{color:ie(e),margin:"2px"}});case"cinema":return n.a.createElement(C.a,{style:{color:ie(e),margin:"2px"}});case"playground":return n.a.createElement(P.a,{style:{color:ie(e),margin:"2px"}});case"pharmacy":return n.a.createElement(M.a,{style:{color:ie(e),margin:"2px"}});case"chemist":return n.a.createElement(A.a,{style:{color:ie(e),margin:"2px"}});case"unknown":return n.a.createElement(Z.a,{style:{color:ie(e),margin:"2px"}});default:return n.a.createElement(V.a,{style:{color:ie(e),margin:"2px"}})}},ie=function(e){switch(e){case"bakery":return U.a[500];case"supermarket":return ae.a[500];case"swimming":return H.a[500];case"cinema":return K.a[500];case"playground":return H.a[500];case"pharmacy":return X.a[500];case"unknown":return ee.a[500];case"school":return ne.a[500];case"kindergarten":return se.a[500];default:return ee.a[900]}},pe=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).getIconForType=r.getIconForType.bind(Object(p.a)(r)),r}return Object(i.a)(a,[{key:"getIconForType",value:function(e){return d.a.divIcon({className:"custom-icon",html:O.a.renderToString(le(e))})}},{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,this.props.osmData.map((function(t,a){return n.a.createElement(f.a,{key:"marker-".concat(a),position:[t.lat,t.lon],icon:e.getIconForType(t.type)},n.a.createElement(b.a,null,n.a.createElement("span",null,t.name),n.a.createElement("span",null,t.type)))})))}}]),a}(n.a.Component),ce=a(179),me=a(177),ue=a(182),he=a(178),ye=a(90),ge=a.n(ye),de=a(180),fe=a(181),be=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.props.loading?n.a.createElement(me.a,{style:{padding:"10px"}},n.a.createElement(he.a,null)):Object.getOwnPropertyNames(this.props.osmData).length>0?n.a.createElement(me.a,{style:{padding:"10px"}},Object.keys(this.props.osmData).map((function(t){return n.a.createElement(ue.a,{title:t,"aria-label":t},n.a.createElement(ce.a,{badgeContent:e.props.osmData[t],style:{color:ie(t)}},le(t)))}))):this.props.osmError?n.a.createElement(me.a,{style:{padding:"10px"}},n.a.createElement(de.a,{container:!0,spacing:3},n.a.createElement(de.a,{item:!0,xs:2},n.a.createElement(ge.a,{color:"error"})),n.a.createElement(de.a,{item:!0,xs:10},n.a.createElement(fe.a,{align:"center",color:"error"},this.props.osmError.message)))):n.a.createElement(n.a.Fragment,null)}}]),a}(n.a.Component),Ee=a(91),Oe=a.n(Ee),we=function(e){Object(c.a)(r,e);var t=Object(m.a)(r);function r(){var e;return Object(l.a)(this,r),(e=t.call(this)).leafletMap=null,e.setLeafletMapRef=function(t){return e.leafletMap=t&&t.leafletElement},e.state={defaultZoom:13,defaultCenter:[0,9],osmRequest:null,defaultRange:1500,osmData:[],osmDataCounted:{},loading:!1},e.loadOSMData=e.loadOSMData.bind(Object(p.a)(e)),e.getTypeByTags=e.getTypeByTags.bind(Object(p.a)(e)),e}return Object(i.a)(r,[{key:"loadOSMData",value:function(){var e=this;this.setState({loading:!0,osmError:null});var t=a(112),r=this.state.osmRequest;r=r.replaceAll("<RANGE>",this.state.defaultRange).replaceAll("<LAT>",this.leafletMap.getCenter().lat).replaceAll("<LON>",this.leafletMap.getCenter().lng),console.log("requesting OSM data for position",this.leafletMap.getCenter(),r),t(r).then((function(t){var a=[],r={};t.filter((function(e){return("node"===e.type||"way"===e.type)&&e.lat&&e.tags})).map((function(t,n){var o=e.getTypeByTags(t.tags);a.push({name:t.tags.name,lat:"node"===t.type?t.lat:t.center.lat,lon:"node"===t.type?t.lon:t.center.lon,type:o}),r.hasOwnProperty(o)?r[o]=r[o]+1:r[o]=1})),e.setState({osmData:a,osmDataCounted:r,loading:!1,osmError:null})})).catch((function(t){e.setState({loading:!1,osmError:t})}))}},{key:"getTypeByTags",value:function(e){return e.hasOwnProperty("shop")&&"bakery"===e.shop?"bakery":e.hasOwnProperty("shop")&&"supermarket"===e.shop?"supermarket":e.hasOwnProperty("shop")&&"chemist"===e.shop?"chemist":e.hasOwnProperty("amenity")&&"cinema"===e.amenity?"cinema":e.hasOwnProperty("sport")&&"swimming"===e.sport?"swimming":e.hasOwnProperty("amenity")&&"pharmacy"===e.amenity?"pharmacy":e.hasOwnProperty("amenity")&&"ice_cream"===e.amenity?"ice_cream":e.hasOwnProperty("amenity")&&"school"===e.amenity?"school":e.hasOwnProperty("amenity")&&"college"===e.amenity?"college":e.hasOwnProperty("amenity")&&"kindergarten"===e.amenity?"kindergarten":e.hasOwnProperty("leisure")&&"park"===e.leisure?"park":e.hasOwnProperty("leisure")&&"playground"===e.amenity?"playground":"unknown"}},{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){e.setState({defaultCenter:[t.coords.latitude,t.coords.longitude]})})),fetch("data/overpassQL.txt").then((function(t){return t.text().then((function(t){console.log(t),e.setState({osmRequest:t})}))})),d.a.easyButton('<span class="target">\t&target;</span>',(function(e,t){navigator.geolocation.getCurrentPosition((function(e){t.setView([e.coords.latitude,e.coords.longitude])}))})).addTo(this.leafletMap),d.a.easyButton('<span class="download">\t&DownArrowBar;</span>',(function(){return e.loadOSMData()})).addTo(this.leafletMap)}},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(u.a,{ref:this.setLeafletMapRef,fullscreenControl:!0,center:this.state.defaultCenter,zoom:this.state.defaultZoom},n.a.createElement(h.b,{position:"topright"},n.a.createElement(h.b.BaseLayer,{checked:!0,name:"CartoDB.VoyagerLabelsUnder"},n.a.createElement(y.a,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),n.a.createElement(h.b.BaseLayer,{checked:!0,name:"CartoDB.Positron"},n.a.createElement(y.a,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]',subdomains:"abcd"})),n.a.createElement(h.b.BaseLayer,{name:"OpenStreetMap.BZH"},n.a.createElement(y.a,{url:"https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles courtesy of <a href="http://www.openstreetmap.bzh/" target="_blank">Breton OpenStreetMap Team</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),n.a.createElement(h.b.BaseLayer,{name:"OpenStreetMap.Mapnik"},n.a.createElement(y.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),n.a.createElement(h.b.BaseLayer,{name:"Stamen.Toner"},n.a.createElement(y.a,{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> \u2014 Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]',subdomains:"abcd",ext:"png"})),n.a.createElement(h.b.BaseLayer,{name:"Stadia.AlidadeSmooth"},n.a.createElement(y.a,{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),n.a.createElement(h.b.BaseLayer,{name:"Stadia.AlidadeSmoothDark"},n.a.createElement(y.a,{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'}))),n.a.createElement(pe,{osmData:this.state.osmData}),n.a.createElement(Oe.a,{position:"bottomleft"},n.a.createElement(be,{osmData:this.state.osmDataCounted,loading:this.state.loading,osmError:this.state.osmError}))))}}]),r}(n.a.Component);s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(we,null)),document.getElementById("root"))},94:function(e,t,a){e.exports=a(152)},99:function(e,t,a){}},[[94,1,2]]]);
//# sourceMappingURL=main.57a4fd07.chunk.js.map