(this["webpackJsonpcreate-new-map-react-leaflet"]=this["webpackJsonpcreate-new-map-react-leaflet"]||[]).push([[0],{131:function(e,t,a){e.exports=a(186)},136:function(e,t,a){},137:function(e,t,a){},186:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),l=a.n(o),s=(a(136),a(43)),i=a(44),c=a(30),p=a(47),m=a(46),u=a(90),h=a(73),d=a(91),g=a(92),y=(a(137),a(138),a(87)),f=a(88),E=a(89),b=a(4),O=a.n(b),C=a(96),v=a.n(C),w=a(112),k=a.n(w),M=a(104),S=a.n(M),D=a(110),x=a.n(D),P=a(105),R=a.n(P),j=a(109),A=a.n(j),I=a(107),q=a.n(I),L=a(111),T=a.n(L),B=a(103),z=a.n(B),_=a(102),F=a.n(_),N=a(108),V=a.n(N),Z=a(106),G=a.n(Z),H=a(97),J=a.n(H),U=a(114),Y=a.n(U),K=a(115),Q=a.n(K),W=a(48),X=a.n(W),$=a(77),ee=a.n($),te=a(81),ae=a.n(te),ne=a(54),re=a.n(ne),oe=a(66),le=a.n(oe),se=a(80),ie=a.n(se),ce=a(79),pe=a.n(ce),me=a(78),ue=a.n(me),he=a(83),de=a.n(he),ge=a(82),ye=a.n(ge),fe=a(113),Ee=a.n(fe),be={bakery:{icon:r.a.createElement(J.a,{style:{color:ee.a[500],margin:"2px"}}),color:ee.a[500],tags:function(e){return e.hasOwnProperty("shop")&&"bakery"===e.shop},query:'["shop"="bakery"]'},college:{icon:r.a.createElement(F.a,{style:{color:le.a[900],margin:"2px"}}),color:le.a[900],tags:function(e){return e.hasOwnProperty("amenity")&&"college"===e.amenity},query:'["amenity"="college"]'},kindergarten:{icon:r.a.createElement(z.a,{style:{color:ue.a[500],margin:"2px"}}),color:ue.a[500],tags:function(e){return e.hasOwnProperty("amenity")&&"kindergarten"===e.amenity},query:'["amenity"="kindergarten"]'},school:{icon:r.a.createElement(S.a,{style:{color:pe.a[500],margin:"2px"}}),color:pe.a[500],tags:function(e){return e.hasOwnProperty("amenity")&&"school"===e.amenity},query:'["amenity"="school"]'},supermarket:{icon:r.a.createElement(R.a,{style:{color:ie.a[500],margin:"2px"}}),color:ie.a[500],tags:function(e){return e.hasOwnProperty("shop")&&"supermarket"===e.shop},query:'["shop"="supermarket"]'},swimming:{icon:r.a.createElement(G.a,{style:{color:X.a[500],margin:"2px"}}),color:X.a[500],tags:function(e){return e.hasOwnProperty("sport")&&"swimming"===e.sport},query:'["sport"="swimming"]'},cinema:{icon:r.a.createElement(q.a,{style:{color:ae.a[500],margin:"2px"}}),color:ae.a[500],tags:function(e){return e.hasOwnProperty("amenity")&&"cinema"===e.amenity},query:'["amenity"="cinema"]'},playground:{icon:r.a.createElement(V.a,{style:{color:ye.a[500],margin:"2px"}}),color:ye.a[500],tags:function(e){return e.hasOwnProperty("leisure")&&"playground"===e.leisure},query:'["leisure"="playground"] ["access"!="private"]'},park:{icon:r.a.createElement(A.a,{style:{color:X.a[500],margin:"2px"}}),color:X.a[500],tags:function(e){return e.hasOwnProperty("leisure")&&"park"===e.leisure},query:'["leisure"="park"]'},pharmacy:{icon:r.a.createElement(x.a,{style:{color:re.a[500],margin:"2px"}}),color:re.a[500],tags:function(e){return e.hasOwnProperty("amenity")&&"pharmacy"===e.amenity},query:'["amenity"="pharmacy"]'},chemist:{icon:r.a.createElement(T.a,{style:{color:re.a[100],margin:"2px"}}),color:re.a[100],tags:function(e){return e.hasOwnProperty("shop")&&"chemist"===e.shop},query:'["shop"="chemist"]'}},Oe=function(e){var t="[timeout:25] [out:json] ; (";return e.forEach((function(e){t+="\n  nwr "+be[e].query+" (around:<RANGE>,<LAT>,<LON>);"})),t+=");  out center;  >; out skel qt;"},Ce=function(e){return"position"===e?r.a.createElement(k.a,{style:{color:ve(e)}}):"center"===e?r.a.createElement(Ee.a,{style:{color:ve(e)}}):"unknown"===e?r.a.createElement(Y.a,{style:{color:ve(e),margin:"2px"}}):be.hasOwnProperty(e)?be[e].icon:r.a.createElement(Q.a,{style:{color:ve(e),margin:"2px"}})},ve=function(e){return"position"===e||"center"===e?de.a[500]:be.hasOwnProperty(e)?be[e].color:le.a[900]},we=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getIconForType=n.getIconForType.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"getIconForType",value:function(e){return O.a.divIcon({className:"custom-icon",html:v.a.renderToString(Ce(e))})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.props.osmData.map((function(t,a){return r.a.createElement(y.a,{key:"marker-".concat(a),position:[t.lat,t.lon],icon:e.getIconForType(t.type)},r.a.createElement(f.a,null,r.a.createElement("span",null,t.type),":",r.a.createElement("span",null,t.name)))})),r.a.createElement(E.a,{center:{lat:this.props.searchCenter[0],lng:this.props.searchCenter[1]},fillColor:"blue",radius:this.props.radius}),r.a.createElement(y.a,{key:"marker-searchCenter",position:[this.props.searchCenter[0],this.props.searchCenter[1]],icon:this.getIconForType("position")}),r.a.createElement(y.a,{key:"marker-mapCenter",position:[this.props.mapCenter[0],this.props.mapCenter[1]],icon:this.getIconForType("center")}))}}]),a}(r.a.Component),ke=a(188),Me=a(122),Se=a.n(Me),De=a(233),xe=a(55),Pe=a(121),Re=a.n(Pe),je=a(65),Ae=a(239),Ie=a(225),qe=a(226),Le=a(227),Te=a(228),Be=a(229),ze=a(231),_e=a(232),Fe=a(222),Ne=a(117),Ve=a.n(Ne),Ze=a(240),Ge=a(242),He=a(230),Je=a(224),Ue=a(118),Ye=a.n(Ue),Ke=a(119),Qe=a.n(Ke),We=a(120),Xe=a.n(We),$e=Object(Fe.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}}));function et(e){var t=e.osmDataCounted,a=e.osmData,n=e.range,o=$e(),l=r.a.useState(!1),s=Object(je.a)(l,2),i=s[0],c=s[1],p=function(){c(!1)};return r.a.createElement("div",null,r.a.createElement(ke.a,{onClick:function(){c(!0)},style:{padding:"10px"}},Object.keys(t).map((function(e){return r.a.createElement(Ze.a,{key:"tooltip-".concat(e),title:e,"aria-label":e},r.a.createElement(Je.a,{badgeContent:t[e],style:{color:ve(e)}},Ce(e)))}))),r.a.createElement(Ae.a,{fullScreen:!0,open:i,onClose:p},r.a.createElement(Ie.a,{className:o.appBar},r.a.createElement(qe.a,null,r.a.createElement(Le.a,{edge:"start",color:"inherit",onClick:p,"aria-label":"close"},r.a.createElement(Ve.a,null)),r.a.createElement(xe.a,{variant:"h6",className:o.title},"POIs within ",n,"m range"))),r.a.createElement(Te.a,{dense:!0},a.map((function(e,t){return r.a.createElement(Be.a,{alignItems:"flex-start",key:"listitem-".concat(t)},r.a.createElement(He.a,null,r.a.createElement(Ge.a,null,Ce(e.type))),r.a.createElement(ze.a,{primary:e.name,secondary:e.address.street+" "+e.address.housenumber+", "+e.address.postcode+" "+e.address.city}),r.a.createElement(_e.a,null,r.a.createElement(Le.a,{color:"primary",disabled:!e.phone,onClick:function(){return window.open("tel:"+e.phone,"_blank")}},r.a.createElement(Ye.a,null))),r.a.createElement(_e.a,null,r.a.createElement(Le.a,{color:"primary",disabled:!e.website,onClick:function(){return window.open(e.website,"_blank")}},r.a.createElement(Qe.a,null))),r.a.createElement(_e.a,null,r.a.createElement(Le.a,{color:"primary",onClick:function(){return window.open("https://www.google.com/maps/dir/?api=1&destination="+e.lat+"%2C"+e.lon,"_blank")}},r.a.createElement(Xe.a,null))))})))))}var tt=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return this.props.loading?r.a.createElement(ke.a,{style:{padding:"5px"}},r.a.createElement(De.a,{container:!0,spacing:3},r.a.createElement(De.a,{item:!0,xs:2},r.a.createElement(Re.a,null)),r.a.createElement(De.a,{item:!0,xs:10},r.a.createElement(xe.a,{align:"center"},"loading OSM data")))):Object.getOwnPropertyNames(this.props.osmDataCounted).length>0?r.a.createElement(et,{osmDataCounted:this.props.osmDataCounted,osmData:this.props.osmData,range:this.props.range}):this.props.osmError?r.a.createElement(ke.a,{style:{padding:"5px"}},r.a.createElement(De.a,{container:!0,spacing:3},r.a.createElement(De.a,{item:!0,xs:2},r.a.createElement(Se.a,{color:"error"})),r.a.createElement(De.a,{item:!0,xs:10},r.a.createElement(xe.a,{align:"center",color:"error"},this.props.osmError.message)))):r.a.createElement(r.a.Fragment,null)}}]),a}(r.a.Component),at=a(67),nt=a.n(at),rt=a(124),ot=a.n(rt),lt=a(234),st=a(238),it=a(237),ct=a(236),pt=a(235),mt=a(123),ut=a.n(mt),ht=a(241);function dt(e){var t=e.defaultRange,a=e.handleRangeChange,n=e.loadOSMData,o=r.a.useState(!1),l=Object(je.a)(o,2),s=l[0],i=l[1],c=function(){i(!1)};return r.a.createElement("div",null,r.a.createElement(lt.a,{size:"small",onClick:function(){i(!0)}},r.a.createElement(ut.a,null)),r.a.createElement(Ae.a,{open:s,onClose:c,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(pt.a,{id:"alert-dialog-title"},"set range to search for POIs"),r.a.createElement(ct.a,null,r.a.createElement(De.a,{container:!0,spacing:2},r.a.createElement(De.a,{item:!0}),r.a.createElement(De.a,{item:!0,xs:!0},r.a.createElement(xe.a,{id:"discrete-slider-always",gutterBottom:!0}),r.a.createElement(ht.a,{value:t,onChange:a,"aria-labelledby":"discrete-slider-always",step:500,defaultValue:1500,min:500,max:3e3,marks:[{value:500,label:"0.5 km"},{value:1500,label:"1.5 km"},{value:3e3,label:"3 km"}],getAriaValueText:function(e){return"".concat(e,"km")},valueLabelDisplay:"off"})),r.a.createElement(De.a,{item:!0}))),r.a.createElement(it.a,null,r.a.createElement(st.a,{onClick:c},"Cancel"),r.a.createElement(st.a,{onClick:function(){i(!1),n()},color:"primary",autoFocus:!0},"Load"))))}var gt=a(84),yt=(a(146),function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).leafletMap=null,e.setLeafletMapRef=function(t){return e.leafletMap=t&&t.leafletElement},e.state={defaultZoom:13,defaultCenter:[0,9],osmRequest:null,defaultRange:1500,osmData:[],osmDataCounted:{},loading:!1},e.loadOSMData=e.loadOSMData.bind(Object(c.a)(e)),e.handleRangeChange=e.handleRangeChange.bind(Object(c.a)(e)),e.handleMove=e.handleMove.bind(Object(c.a)(e)),e.handleOSMResponse=e.handleOSMResponse.bind(Object(c.a)(e)),e}return Object(i.a)(n,[{key:"loadOSMData",value:function(){var e=this;this.setState({loading:!0,osmError:null});var t=a(147),n=this.state.osmRequest;n=n.replaceAll("<RANGE>",this.state.defaultRange).replaceAll("<LAT>",this.leafletMap.getCenter().lat).replaceAll("<LON>",this.leafletMap.getCenter().lng),console.log("requesting OSM data for position",this.leafletMap.getCenter(),n),t(n).then((function(t){e.handleOSMResponse(t)})).catch((function(t){e.setState({loading:!1,osmError:t})}))}},{key:"handleOSMResponse",value:function(e){var t=[],a={};e.filter((function(e){return("node"===e.type||"way"===e.type)&&e.lat&&e.tags})).map((function(e,n){var r=function(e){var t="unknown";return Object.keys(be).forEach((function(a){be[a].tags(e)&&(t=a)})),t}(e.tags);t.push({name:e.tags.name,lat:"node"===e.type?e.lat:e.center.lat,lon:"node"===e.type?e.lon:e.center.lon,type:r,address:{city:e.tags["addr:city"],housenumber:e.tags["addr:housenumber"],postcode:e.tags["addr:postcode"],street:e.tags["addr:street"]},openingHours:e.tags.opening_hours,website:e.tags.website,phone:e.tags.phone}),a.hasOwnProperty(r)?a[r]=a[r]+1:a[r]=1})),this.setState({osmData:t,osmDataCounted:a,loading:!1,osmError:null,defaultCenter:[this.leafletMap.getCenter().lat,this.leafletMap.getCenter().lng]})}},{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){e.setState({defaultCenter:[t.coords.latitude,t.coords.longitude]})})),this.setState({osmRequest:Oe(Object.keys(be))});var t=new gt.b({provider:new gt.a,style:"bar",showMarker:!1});this.leafletMap.addControl(t)}},{key:"handleRangeChange",value:function(e,t){this.setState({defaultRange:t})}},{key:"handleMove",value:function(e){this.setState({mapCenter:[e.target.getCenter().lat,e.target.getCenter().lng]})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{ref:this.setLeafletMapRef,center:this.state.defaultCenter,zoom:this.state.defaultZoom,zoomControl:!1,onMove:this.handleMove},r.a.createElement(h.b,{position:"topright"},r.a.createElement(h.b.BaseLayer,{checked:!0,name:"CartoDB.VoyagerLabelsUnder"},r.a.createElement(d.a,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{checked:!0,name:"CartoDB.Positron"},r.a.createElement(d.a,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]',subdomains:"abcd"})),r.a.createElement(h.b.BaseLayer,{name:"OpenStreetMap.BZH"},r.a.createElement(d.a,{url:"https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles courtesy of <a href="http://www.openstreetmap.bzh/" target="_blank">Breton OpenStreetMap Team</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"OpenStreetMap.Mapnik"},r.a.createElement(d.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"Stamen.Toner"},r.a.createElement(d.a,{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> \u2014 Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]',subdomains:"abcd",ext:"png"})),r.a.createElement(h.b.BaseLayer,{name:"Stadia.AlidadeSmooth"},r.a.createElement(d.a,{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"Stadia.AlidadeSmoothDark"},r.a.createElement(d.a,{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'}))),r.a.createElement(g.a,{position:"topright"}),r.a.createElement(we,{osmData:this.state.osmData,searchCenter:this.state.defaultCenter,mapCenter:this.state.mapCenter?this.state.mapCenter:this.state.defaultCenter,radius:this.state.defaultRange}),r.a.createElement(nt.a,{position:"topleft"},r.a.createElement(lt.a,{size:"small",onClick:function(){navigator.geolocation.getCurrentPosition((function(t){e.leafletMap.setView([t.coords.latitude,t.coords.longitude])}))}},r.a.createElement(ot.a,null))),r.a.createElement(nt.a,{position:"topleft"},r.a.createElement(dt,{defaultRange:this.state.defaultRange,handleRangeChange:this.handleRangeChange,loadOSMData:this.loadOSMData})),r.a.createElement(nt.a,{position:"bottomleft"},r.a.createElement(tt,{osmDataCounted:this.state.osmDataCounted,osmData:this.state.osmData,loading:this.state.loading,osmError:this.state.osmError,range:this.state.defaultRange}))))}}]),n}(r.a.Component));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(yt,null)),document.getElementById("root"))}},[[131,1,2]]]);
//# sourceMappingURL=main.4c094492.chunk.js.map