(this["webpackJsonpcreate-new-map-react-leaflet"]=this["webpackJsonpcreate-new-map-react-leaflet"]||[]).push([[0],{111:function(e,t,a){e.exports=a(169)},116:function(e,t,a){},117:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(11),o=a.n(s),l=(a(116),a(37)),i=a(38),c=a(27),p=a(41),m=a(40),u=a(68),h=a(58),g=a(69),d=a(3),y=a.n(d),f=(a(117),a(118),a(119),a(120),a(65)),E=a(66),b=a(67),v=a(73),O=a.n(v),k=a(74),C=a.n(k),w=a(83),M=a.n(w),x=a(89),S=a.n(x),D=a(84),P=a.n(D),T=a(88),j=a.n(T),A=a(86),B=a.n(A),R=a(90),I=a.n(R),L=a(82),z=a.n(L),N=a(81),_=a.n(N),F=a(87),q=a.n(F),V=a(85),Z=a.n(V),J=a(80),G=a.n(J),H=a(91),Q=a.n(H),U=a(92),Y=a.n(U),K=a(52),W=a.n(K),X=a(93),$=a.n(X),ee=a(95),te=a.n(ee),ae=a(97),ne=a.n(ae),re=a(63),se=a.n(re),oe=a(94),le=a.n(oe),ie=a(98),ce=a.n(ie),pe=a(99),me=a.n(pe),ue=a(62),he=a.n(ue),ge=a(96),de=a.n(ge),ye=a(79),fe=a.n(ye),Ee=function(e){switch(e){case"position":return r.a.createElement(C.a,{style:{color:be(e)}});case"center":return r.a.createElement(fe.a,{style:{color:be(e)}});case"bakery":return r.a.createElement(G.a,{style:{color:be(e),margin:"2px"}});case"college":return r.a.createElement(_.a,{style:{color:be(e),margin:"2px"}});case"kindergarten":return r.a.createElement(z.a,{style:{color:be(e),margin:"2px"}});case"school":return r.a.createElement(M.a,{style:{color:be(e),margin:"2px"}});case"supermarket":return r.a.createElement(P.a,{style:{color:be(e),margin:"2px"}});case"swimming":return r.a.createElement(Z.a,{style:{color:be(e),margin:"2px"}});case"cinema":return r.a.createElement(B.a,{style:{color:be(e),margin:"2px"}});case"playground":return r.a.createElement(q.a,{style:{color:be(e),margin:"2px"}});case"park":return r.a.createElement(j.a,{style:{color:be(e),margin:"2px"}});case"pharmacy":return r.a.createElement(S.a,{style:{color:be(e),margin:"2px"}});case"chemist":return r.a.createElement(I.a,{style:{color:be(e),margin:"2px"}});case"unknown":return r.a.createElement(Q.a,{style:{color:be(e),margin:"2px"}});default:return r.a.createElement(Y.a,{style:{color:be(e),margin:"2px"}})}},be=function(e){switch(e){case"position":case"center":return he.a[500];case"bakery":return $.a[500];case"supermarket":return le.a[500];case"swimming":return W.a[500];case"cinema":return te.a[500];case"playground":return de.a[500];case"park":return W.a[500];case"pharmacy":return ne.a[500];case"unknown":return se.a[500];case"school":return ce.a[500];case"kindergarten":return me.a[500];default:return se.a[900]}},ve=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getIconForType=n.getIconForType.bind(Object(c.a)(n)),n}return Object(i.a)(a,[{key:"getIconForType",value:function(e){return y.a.divIcon({className:"custom-icon",html:O.a.renderToString(Ee(e))})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.props.osmData.map((function(t,a){return r.a.createElement(f.a,{key:"marker-".concat(a),position:[t.lat,t.lon],icon:e.getIconForType(t.type)},r.a.createElement(E.a,null,r.a.createElement("span",null,t.type),":",r.a.createElement("span",null,t.name)))})),r.a.createElement(b.a,{center:{lat:this.props.searchCenter[0],lng:this.props.searchCenter[1]},fillColor:"blue",radius:this.props.radius}),r.a.createElement(f.a,{key:"marker-searchCenter",position:[this.props.searchCenter[0],this.props.searchCenter[1]],icon:this.getIconForType("position")}),r.a.createElement(f.a,{key:"marker-mapCenter",position:[this.props.mapCenter[0],this.props.mapCenter[1]],icon:this.getIconForType("center")}))}}]),a}(r.a.Component),Oe=a(199),ke=a(196),Ce=a(202),we=a(102),Me=a.n(we),xe=a(197),Se=a(198),De=a(100),Pe=a.n(De),Te=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.props.loading?r.a.createElement(ke.a,{style:{padding:"5px"}},r.a.createElement(xe.a,{container:!0,spacing:3},r.a.createElement(xe.a,{item:!0,xs:2},r.a.createElement(Pe.a,null)),r.a.createElement(xe.a,{item:!0,xs:10},r.a.createElement(Se.a,{align:"center"},"loading OSM data")))):Object.getOwnPropertyNames(this.props.osmData).length>0?r.a.createElement(ke.a,{style:{padding:"10px"}},Object.keys(this.props.osmData).map((function(t){return r.a.createElement(Ce.a,{title:t,"aria-label":t},r.a.createElement(Oe.a,{badgeContent:e.props.osmData[t],style:{color:be(t)}},Ee(t)))}))):this.props.osmError?r.a.createElement(ke.a,{style:{padding:"5px"}},r.a.createElement(xe.a,{container:!0,spacing:3},r.a.createElement(xe.a,{item:!0,xs:2},r.a.createElement(Me.a,{color:"error"})),r.a.createElement(xe.a,{item:!0,xs:10},r.a.createElement(Se.a,{align:"center",color:"error"},this.props.osmError.message)))):r.a.createElement(r.a.Fragment,null)}}]),a}(r.a.Component),je=a(55),Ae=a.n(je),Be=a(104),Re=a.n(Be),Ie=a(105),Le=a.n(Ie),ze=a(200),Ne=a(103),_e=a(203),Fe=(a(128),a(201)),qe=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).leafletMap=null,e.setLeafletMapRef=function(t){return e.leafletMap=t&&t.leafletElement},e.state={defaultZoom:13,defaultCenter:[0,9],osmRequest:null,defaultRange:1500,osmData:[],osmDataCounted:{},loading:!1},e.loadOSMData=e.loadOSMData.bind(Object(c.a)(e)),e.getTypeByTags=e.getTypeByTags.bind(Object(c.a)(e)),e.handleRangeChange=e.handleRangeChange.bind(Object(c.a)(e)),e.handleMoveEnd=e.handleMoveEnd.bind(Object(c.a)(e)),e}return Object(i.a)(n,[{key:"loadOSMData",value:function(){var e=this;this.setState({loading:!0,osmError:null});var t=a(129),n=this.state.osmRequest;n=n.replaceAll("<RANGE>",this.state.defaultRange).replaceAll("<LAT>",this.leafletMap.getCenter().lat).replaceAll("<LON>",this.leafletMap.getCenter().lng),console.log("requesting OSM data for position",this.leafletMap.getCenter(),n),t(n).then((function(t){var a=[],n={};t.filter((function(e){return("node"===e.type||"way"===e.type)&&e.lat&&e.tags})).map((function(t,r){var s=e.getTypeByTags(t.tags);a.push({name:t.tags.name,lat:"node"===t.type?t.lat:t.center.lat,lon:"node"===t.type?t.lon:t.center.lon,type:s}),n.hasOwnProperty(s)?n[s]=n[s]+1:n[s]=1})),e.setState({osmData:a,osmDataCounted:n,loading:!1,osmError:null,defaultCenter:[e.leafletMap.getCenter().lat,e.leafletMap.getCenter().lng]})})).catch((function(t){e.setState({loading:!1,osmError:t})}))}},{key:"getTypeByTags",value:function(e){return e.hasOwnProperty("shop")&&"bakery"===e.shop?"bakery":e.hasOwnProperty("shop")&&"supermarket"===e.shop?"supermarket":e.hasOwnProperty("shop")&&"chemist"===e.shop?"chemist":e.hasOwnProperty("amenity")&&"cinema"===e.amenity?"cinema":e.hasOwnProperty("sport")&&"swimming"===e.sport?"swimming":e.hasOwnProperty("amenity")&&"pharmacy"===e.amenity?"pharmacy":e.hasOwnProperty("amenity")&&"ice_cream"===e.amenity?"ice_cream":e.hasOwnProperty("amenity")&&"school"===e.amenity?"school":e.hasOwnProperty("amenity")&&"college"===e.amenity?"college":e.hasOwnProperty("amenity")&&"kindergarten"===e.amenity?"kindergarten":e.hasOwnProperty("leisure")&&"park"===e.leisure?"park":e.hasOwnProperty("leisure")&&"playground"===e.leisure?"playground":"unknown"}},{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){e.setState({defaultCenter:[t.coords.latitude,t.coords.longitude]})})),fetch("data/overpassQL.txt").then((function(t){return t.text().then((function(t){console.log(t),e.setState({osmRequest:t})}))}))}},{key:"handleRangeChange",value:function(e,t){this.setState({defaultRange:t})}},{key:"handleMoveEnd",value:function(e){this.setState({mapCenter:[e.target.getCenter().lat,e.target.getCenter().lng]})}},{key:"valuetext",value:function(e){return"".concat(e,"km")}},{key:"render",value:function(){var e=this,t=[{value:500,label:"0.5 km"},{value:1500,label:"1.5 km"},{value:3e3,label:"3 km"}];return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{ref:this.setLeafletMapRef,fullscreenControl:!0,center:this.state.defaultCenter,zoom:this.state.defaultZoom,onMoveEnd:this.handleMoveEnd},r.a.createElement(h.b,{position:"topright"},r.a.createElement(h.b.BaseLayer,{checked:!0,name:"CartoDB.VoyagerLabelsUnder"},r.a.createElement(g.a,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{checked:!0,name:"CartoDB.Positron"},r.a.createElement(g.a,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]',subdomains:"abcd"})),r.a.createElement(h.b.BaseLayer,{name:"OpenStreetMap.BZH"},r.a.createElement(g.a,{url:"https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles courtesy of <a href="http://www.openstreetmap.bzh/" target="_blank">Breton OpenStreetMap Team</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"OpenStreetMap.Mapnik"},r.a.createElement(g.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"Stamen.Toner"},r.a.createElement(g.a,{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> \u2014 Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]',subdomains:"abcd",ext:"png"})),r.a.createElement(h.b.BaseLayer,{name:"Stadia.AlidadeSmooth"},r.a.createElement(g.a,{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"Stadia.AlidadeSmoothDark"},r.a.createElement(g.a,{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'}))),r.a.createElement(ve,{osmData:this.state.osmData,searchCenter:this.state.defaultCenter,mapCenter:this.state.mapCenter?this.state.mapCenter:this.state.defaultCenter,radius:this.state.defaultRange}),r.a.createElement(Ae.a,{position:"topleft"},r.a.createElement(ze.a,{size:"small",onClick:function(){navigator.geolocation.getCurrentPosition((function(t){e.leafletMap.setView([t.coords.latitude,t.coords.longitude])}))}},r.a.createElement(Re.a,null))),r.a.createElement(Ae.a,{position:"topleft"},r.a.createElement(Ne.a,{trigger:r.a.createElement(ze.a,{size:"small"},r.a.createElement(Le.a,null)),modal:!0,nested:!0},(function(a){return r.a.createElement("div",{className:"modal"},r.a.createElement("button",{className:"close",onClick:a},"\xd7"),r.a.createElement("div",{className:"header"}," select search radius "),r.a.createElement("div",{className:"content"}," ",r.a.createElement(xe.a,{container:!0,spacing:2},r.a.createElement(xe.a,{item:!0}),r.a.createElement(xe.a,{item:!0,xs:!0},r.a.createElement(Se.a,{id:"discrete-slider-always",gutterBottom:!0}),r.a.createElement(_e.a,{value:e.state.defaultRange,onChange:e.handleRangeChange,"aria-labelledby":"discrete-slider-always",step:500,defaultValue:1500,min:500,max:3e3,marks:t,getAriaValueText:e.valuetext,valueLabelDisplay:"on"})),r.a.createElement(xe.a,{item:!0}))),r.a.createElement("div",{className:"actions"},r.a.createElement(Fe.a,{variant:"contained",color:"primary",onClick:function(){e.loadOSMData(),a()}},"load")))}))),r.a.createElement(Ae.a,{position:"bottomleft"},r.a.createElement(Te,{osmData:this.state.osmDataCounted,loading:this.state.loading,osmError:this.state.osmError}))))}}]),n}(r.a.Component);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(qe,null)),document.getElementById("root"))}},[[111,1,2]]]);
//# sourceMappingURL=main.99daf021.chunk.js.map