(this["webpackJsonpcreate-new-map-react-leaflet"]=this["webpackJsonpcreate-new-map-react-leaflet"]||[]).push([[0],{106:function(e,a,t){e.exports=t(164)},111:function(e,a,t){},112:function(e,a,t){},164:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(11),s=t.n(o),l=(t(111),t(36)),i=t(37),c=t(30),p=t(40),m=t(39),u=t(65),h=t(57),g=t(66),d=t(3),y=t.n(d),f=(t(112),t(113),t(114),t(115),t(63)),E=t(64),b=t(70),O=t.n(b),v=t(78),w=t.n(v),k=t(84),x=t.n(k),M=t(79),S=t.n(M),C=t(83),D=t.n(C),P=t(81),T=t.n(P),j=t(85),A=t.n(j),B=t(77),R=t.n(B),L=t(76),I=t.n(L),z=t(82),N=t.n(z),_=t(80),F=t.n(_),q=t(71),V=t.n(q),Z=t(86),J=t.n(Z),G=t(87),H=t.n(G),Q=t(51),U=t.n(Q),Y=t(88),K=t.n(Y),W=t(90),X=t.n(W),$=t(92),ee=t.n($),ae=t(61),te=t.n(ae),ne=t(89),re=t.n(ne),oe=t(93),se=t.n(oe),le=t(94),ie=t.n(le),ce=t(91),pe=t.n(ce),me=function(e){switch(e){case"bakery":return r.a.createElement(V.a,{style:{color:ue(e),margin:"2px"}});case"college":return r.a.createElement(I.a,{style:{color:ue(e),margin:"2px"}});case"kindergarten":return r.a.createElement(R.a,{style:{color:ue(e),margin:"2px"}});case"school":return r.a.createElement(w.a,{style:{color:ue(e),margin:"2px"}});case"supermarket":return r.a.createElement(S.a,{style:{color:ue(e),margin:"2px"}});case"swimming":return r.a.createElement(F.a,{style:{color:ue(e),margin:"2px"}});case"cinema":return r.a.createElement(T.a,{style:{color:ue(e),margin:"2px"}});case"playground":return r.a.createElement(N.a,{style:{color:ue(e),margin:"2px"}});case"park":return r.a.createElement(D.a,{style:{color:ue(e),margin:"2px"}});case"pharmacy":return r.a.createElement(x.a,{style:{color:ue(e),margin:"2px"}});case"chemist":return r.a.createElement(A.a,{style:{color:ue(e),margin:"2px"}});case"unknown":return r.a.createElement(J.a,{style:{color:ue(e),margin:"2px"}});default:return r.a.createElement(H.a,{style:{color:ue(e),margin:"2px"}})}},ue=function(e){switch(e){case"bakery":return K.a[500];case"supermarket":return re.a[500];case"swimming":return U.a[500];case"cinema":return X.a[500];case"playground":return pe.a[500];case"park":return U.a[500];case"pharmacy":return ee.a[500];case"unknown":return te.a[500];case"school":return se.a[500];case"kindergarten":return ie.a[500];default:return te.a[900]}},he=function(e){Object(p.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).getIconForType=n.getIconForType.bind(Object(c.a)(n)),n}return Object(i.a)(t,[{key:"getIconForType",value:function(e){return y.a.divIcon({className:"custom-icon",html:O.a.renderToString(me(e))})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.props.osmData.map((function(a,t){return r.a.createElement(f.a,{key:"marker-".concat(t),position:[a.lat,a.lon],icon:e.getIconForType(a.type)},r.a.createElement(E.a,null,r.a.createElement("span",null,a.type),":",r.a.createElement("span",null,a.name)))})))}}]),t}(r.a.Component),ge=t(194),de=t(191),ye=t(197),fe=t(97),Ee=t.n(fe),be=t(192),Oe=t(193),ve=t(95),we=t.n(ve),ke=function(e){Object(p.a)(t,e);var a=Object(m.a)(t);function t(e){return Object(l.a)(this,t),a.call(this,e)}return Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.props.loading?r.a.createElement(de.a,{style:{padding:"5px"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(we.a,null)),r.a.createElement(be.a,{item:!0,xs:10},r.a.createElement(Oe.a,{align:"center"},"loading OSM data")))):Object.getOwnPropertyNames(this.props.osmData).length>0?r.a.createElement(de.a,{style:{padding:"10px"}},Object.keys(this.props.osmData).map((function(a){return r.a.createElement(ye.a,{title:a,"aria-label":a},r.a.createElement(ge.a,{badgeContent:e.props.osmData[a],style:{color:ue(a)}},me(a)))}))):this.props.osmError?r.a.createElement(de.a,{style:{padding:"5px"}},r.a.createElement(be.a,{container:!0,spacing:3},r.a.createElement(be.a,{item:!0,xs:2},r.a.createElement(Ee.a,{color:"error"})),r.a.createElement(be.a,{item:!0,xs:10},r.a.createElement(Oe.a,{align:"center",color:"error"},this.props.osmError.message)))):r.a.createElement(r.a.Fragment,null)}}]),t}(r.a.Component),xe=t(54),Me=t.n(xe),Se=t(99),Ce=t.n(Se),De=t(100),Pe=t.n(De),Te=t(195),je=t(98),Ae=t(198),Be=(t(123),t(196)),Re=function(e){Object(p.a)(n,e);var a=Object(m.a)(n);function n(){var e;return Object(l.a)(this,n),(e=a.call(this)).leafletMap=null,e.setLeafletMapRef=function(a){return e.leafletMap=a&&a.leafletElement},e.state={defaultZoom:13,defaultCenter:[0,9],osmRequest:null,defaultRange:1500,osmData:[],osmDataCounted:{},loading:!1},e.loadOSMData=e.loadOSMData.bind(Object(c.a)(e)),e.getTypeByTags=e.getTypeByTags.bind(Object(c.a)(e)),e.handleRangeChange=e.handleRangeChange.bind(Object(c.a)(e)),e}return Object(i.a)(n,[{key:"loadOSMData",value:function(){var e=this;this.setState({loading:!0,osmError:null});var a=t(124),n=this.state.osmRequest;n=n.replaceAll("<RANGE>",this.state.defaultRange).replaceAll("<LAT>",this.leafletMap.getCenter().lat).replaceAll("<LON>",this.leafletMap.getCenter().lng),console.log("requesting OSM data for position",this.leafletMap.getCenter(),n),a(n).then((function(a){var t=[],n={};a.filter((function(e){return("node"===e.type||"way"===e.type)&&e.lat&&e.tags})).map((function(a,r){var o=e.getTypeByTags(a.tags);t.push({name:a.tags.name,lat:"node"===a.type?a.lat:a.center.lat,lon:"node"===a.type?a.lon:a.center.lon,type:o}),n.hasOwnProperty(o)?n[o]=n[o]+1:n[o]=1})),e.setState({osmData:t,osmDataCounted:n,loading:!1,osmError:null})})).catch((function(a){e.setState({loading:!1,osmError:a})}))}},{key:"getTypeByTags",value:function(e){return e.hasOwnProperty("shop")&&"bakery"===e.shop?"bakery":e.hasOwnProperty("shop")&&"supermarket"===e.shop?"supermarket":e.hasOwnProperty("shop")&&"chemist"===e.shop?"chemist":e.hasOwnProperty("amenity")&&"cinema"===e.amenity?"cinema":e.hasOwnProperty("sport")&&"swimming"===e.sport?"swimming":e.hasOwnProperty("amenity")&&"pharmacy"===e.amenity?"pharmacy":e.hasOwnProperty("amenity")&&"ice_cream"===e.amenity?"ice_cream":e.hasOwnProperty("amenity")&&"school"===e.amenity?"school":e.hasOwnProperty("amenity")&&"college"===e.amenity?"college":e.hasOwnProperty("amenity")&&"kindergarten"===e.amenity?"kindergarten":e.hasOwnProperty("leisure")&&"park"===e.leisure?"park":e.hasOwnProperty("leisure")&&"playground"===e.leisure?"playground":"unknown"}},{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(a){e.setState({defaultCenter:[a.coords.latitude,a.coords.longitude]})})),fetch("data/overpassQL.txt").then((function(a){return a.text().then((function(a){console.log(a),e.setState({osmRequest:a})}))}))}},{key:"handleRangeChange",value:function(e,a){this.setState({defaultRange:a})}},{key:"valuetext",value:function(e){return"".concat(e,"km")}},{key:"render",value:function(){var e=this,a=[{value:500,label:"0.5 km"},{value:1500,label:"1.5 km"},{value:3e3,label:"3 km"}];return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{ref:this.setLeafletMapRef,fullscreenControl:!0,center:this.state.defaultCenter,zoom:this.state.defaultZoom},r.a.createElement(h.b,{position:"topright"},r.a.createElement(h.b.BaseLayer,{checked:!0,name:"CartoDB.VoyagerLabelsUnder"},r.a.createElement(g.a,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{checked:!0,name:"CartoDB.Positron"},r.a.createElement(g.a,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]',subdomains:"abcd"})),r.a.createElement(h.b.BaseLayer,{name:"OpenStreetMap.BZH"},r.a.createElement(g.a,{url:"https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles courtesy of <a href="http://www.openstreetmap.bzh/" target="_blank">Breton OpenStreetMap Team</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"OpenStreetMap.Mapnik"},r.a.createElement(g.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"Stamen.Toner"},r.a.createElement(g.a,{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> \u2014 Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]',subdomains:"abcd",ext:"png"})),r.a.createElement(h.b.BaseLayer,{name:"Stadia.AlidadeSmooth"},r.a.createElement(g.a,{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"Stadia.AlidadeSmoothDark"},r.a.createElement(g.a,{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors | Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'}))),r.a.createElement(he,{osmData:this.state.osmData}),r.a.createElement(Me.a,{position:"topleft"},r.a.createElement(Te.a,{size:"small",onClick:function(){navigator.geolocation.getCurrentPosition((function(a){e.leafletMap.setView([a.coords.latitude,a.coords.longitude])}))}},r.a.createElement(Ce.a,null))),r.a.createElement(Me.a,{position:"topleft"},r.a.createElement(je.a,{trigger:r.a.createElement(Te.a,{size:"small"},r.a.createElement(Pe.a,null)),modal:!0,nested:!0},(function(t){return r.a.createElement("div",{className:"modal"},r.a.createElement("button",{className:"close",onClick:t},"\xd7"),r.a.createElement("div",{className:"header"}," select search radius "),r.a.createElement("div",{className:"content"}," ",r.a.createElement(be.a,{container:!0,spacing:2},r.a.createElement(be.a,{item:!0}),r.a.createElement(be.a,{item:!0,xs:!0},r.a.createElement(Oe.a,{id:"discrete-slider-always",gutterBottom:!0}),r.a.createElement(Ae.a,{value:e.state.defaultRange,onChange:e.handleRangeChange,"aria-labelledby":"discrete-slider-always",step:500,defaultValue:1500,min:500,max:3e3,marks:a,getAriaValueText:e.valuetext,valueLabelDisplay:"on"})),r.a.createElement(be.a,{item:!0}))),r.a.createElement("div",{className:"actions"},r.a.createElement(Be.a,{variant:"contained",color:"primary",onClick:function(){e.loadOSMData(),t()}},"load")))}))),r.a.createElement(Me.a,{position:"bottomleft"},r.a.createElement(ke,{osmData:this.state.osmDataCounted,loading:this.state.loading,osmError:this.state.osmError}))))}}]),n}(r.a.Component);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Re,null)),document.getElementById("root"))}},[[106,1,2]]]);
//# sourceMappingURL=main.b332a0d4.chunk.js.map