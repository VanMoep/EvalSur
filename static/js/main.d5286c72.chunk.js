(this["webpackJsonpcreate-new-map-react-leaflet"]=this["webpackJsonpcreate-new-map-react-leaflet"]||[]).push([[0],{145:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),s=a.n(o),l=(a(92),a(31)),c=a(32),i=a(26),p=a(34),m=a(33),u=a(59),h=a(51),y=a(60),g=a(3),d=a.n(g),f=(a(93),a(94),a(95),a(96),a(97),a(57)),b=a(58),O=a(64),w=a.n(O),E=a(68),k=a.n(E),M=a(73),v=a.n(M),S=a(69),x=a.n(S),D=a(72),T=a.n(D),C=a(71),B=a.n(C),P=a(74),j=a.n(P),A=a(67),L=a.n(A),z=a(66),R=a.n(z),I=a(70),_=a.n(I),F=a(65),q=a.n(F),N=a(75),Z=a.n(N),J=a(76),V=a.n(J),G=a(45),H=a.n(G),Q=a(77),U=a.n(Q),Y=a(79),K=a.n(Y),W=a(80),X=a.n(W),$=a(55),ee=a.n($),te=a(78),ae=a.n(te),ne=a(81),re=a.n(ne),oe=a(82),se=a.n(oe),le=function(e){switch(e){case"bakery":return r.a.createElement(q.a,{style:{color:ce(e),margin:"2px"}});case"college":return r.a.createElement(R.a,{style:{color:ce(e),margin:"2px"}});case"kindergarten":return r.a.createElement(L.a,{style:{color:ce(e),margin:"2px"}});case"school":return r.a.createElement(k.a,{style:{color:ce(e),margin:"2px"}});case"supermarket":return r.a.createElement(x.a,{style:{color:ce(e),margin:"2px"}});case"swimming":return r.a.createElement(_.a,{style:{color:ce(e),margin:"2px"}});case"cinema":return r.a.createElement(B.a,{style:{color:ce(e),margin:"2px"}});case"playground":return r.a.createElement(T.a,{style:{color:ce(e),margin:"2px"}});case"pharmacy":return r.a.createElement(v.a,{style:{color:ce(e),margin:"2px"}});case"chemist":return r.a.createElement(j.a,{style:{color:ce(e),margin:"2px"}});case"unknown":return r.a.createElement(Z.a,{style:{color:ce(e),margin:"2px"}});default:return r.a.createElement(V.a,{style:{color:ce(e),margin:"2px"}})}},ce=function(e){switch(e){case"bakery":return U.a[500];case"supermarket":return ae.a[500];case"swimming":return H.a[500];case"cinema":return K.a[500];case"playground":return H.a[500];case"pharmacy":return X.a[500];case"unknown":return ee.a[500];case"school":return re.a[500];case"kindergarten":return se.a[500];default:return ee.a[900]}},ie=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getIconForType=n.getIconForType.bind(Object(i.a)(n)),n}return Object(c.a)(a,[{key:"getIconForType",value:function(e){return d.a.divIcon({className:"custom-icon",html:w.a.renderToString(le(e))})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.props.osmData.map((function(t,a){return r.a.createElement(f.a,{key:"marker-".concat(a),position:[t.lat,t.lon],icon:e.getIconForType(t.type)},r.a.createElement(b.a,null,r.a.createElement("span",null,t.name),r.a.createElement("span",null,t.type)))})))}}]),a}(r.a.Component),pe=a(167),me=a(166),ue=a(168),he=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return this.props.osmData?r.a.createElement(me.a,{style:{padding:"10px"}},Object.keys(this.props.osmData).map((function(t){return r.a.createElement(ue.a,{title:t,"aria-label":t},r.a.createElement(pe.a,{badgeContent:e.props.osmData[t],style:{color:ce(t)}},le(t)))}))):r.a.createElement(r.a.Fragment,null)}}]),a}(r.a.Component),ye=a(84),ge=a.n(ye),de=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).leafletMap=null,e.setLeafletMapRef=function(t){return e.leafletMap=t&&t.leafletElement},e.state={defaultZoom:13,defaultCenter:[0,9],osmRequest:null,defaultRange:1500,osmData:[],osmDataCounted:{}},e.loadOSMData=e.loadOSMData.bind(Object(i.a)(e)),e.getTypeByTags=e.getTypeByTags.bind(Object(i.a)(e)),e}return Object(c.a)(n,[{key:"loadOSMData",value:function(){var e=this,t=a(105),n=this.state.osmRequest;n=n.replaceAll("<RANGE>",this.state.defaultRange).replaceAll("<LAT>",this.leafletMap.getCenter().lat).replaceAll("<LON>",this.leafletMap.getCenter().lng),console.log("requesting OSM data for position",this.leafletMap.getCenter()),t(n).then((function(t){var a=[],n={};t.filter((function(e){return("node"===e.type||"way"===e.type)&&e.lat&&e.tags})).map((function(t,r){var o=e.getTypeByTags(t.tags);a.push({name:t.tags.name,lat:"node"===t.type?t.lat:t.center.lat,lon:"node"===t.type?t.lon:t.center.lon,type:o}),n.hasOwnProperty(o)?n[o]=n[o]+1:n[o]=1})),e.setState({osmData:a,osmDataCounted:n})})).catch(console.error)}},{key:"getTypeByTags",value:function(e){return e.hasOwnProperty("shop")&&"bakery"===e.shop?"bakery":e.hasOwnProperty("shop")&&"supermarket"===e.shop?"supermarket":e.hasOwnProperty("shop")&&"chemist"===e.shop?"chemist":e.hasOwnProperty("amenity")&&"cinema"===e.amenity?"cinema":e.hasOwnProperty("sport")&&"swimming"===e.sport?"swimming":e.hasOwnProperty("amenity")&&"pharmacy"===e.amenity?"pharmacy":e.hasOwnProperty("amenity")&&"ice_cream"===e.amenity?"ice_cream":e.hasOwnProperty("amenity")&&"school"===e.amenity?"school":e.hasOwnProperty("amenity")&&"college"===e.amenity?"college":e.hasOwnProperty("amenity")&&"kindergarten"===e.amenity?"kindergarten":e.hasOwnProperty("leisure")&&"park"===e.leisure?"park":e.hasOwnProperty("leisure")&&"playground"===e.amenity?"playground":"unknown"}},{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){e.setState({defaultCenter:[t.coords.latitude,t.coords.longitude]})})),fetch("././overpassQL.txt").then((function(t){return t.text().then((function(t){return e.setState({osmRequest:t})}))})),d.a.easyButton('<span class="target">\t&target;</span>',(function(e,t){navigator.geolocation.getCurrentPosition((function(e){t.setView([e.coords.latitude,e.coords.longitude])}))})).addTo(this.leafletMap),d.a.easyButton('<span class="download">\t&DownArrowBar;</span>',(function(){return e.loadOSMData()})).addTo(this.leafletMap)}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{ref:this.setLeafletMapRef,fullscreenControl:!0,center:this.state.defaultCenter,zoom:this.state.defaultZoom},r.a.createElement(h.b,{position:"topright"},r.a.createElement(h.b.BaseLayer,{checked:!0,name:"CartoDB.VoyagerLabelsUnder"},r.a.createElement(y.a,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>'})),r.a.createElement(h.b.BaseLayer,{checked:!0,name:"CartoDB.Positron"},r.a.createElement(y.a,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd"})),r.a.createElement(h.b.BaseLayer,{name:"OpenStreetMap.BZH"},r.a.createElement(y.a,{url:"https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles courtesy of <a href="http://www.openstreetmap.bzh/" target="_blank">Breton OpenStreetMap Team</a> Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"OpenStreetMap.Mapnik"},r.a.createElement(y.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> \r Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]'})),r.a.createElement(h.b.BaseLayer,{name:"Stamen.Toner"},r.a.createElement(y.a,{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> \u2014 Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors Data mining by [<a href="http://overpass-api.de/">Overpass API</a>]',subdomains:"abcd",ext:"png"})),r.a.createElement(h.b.BaseLayer,{name:"Stadia.AlidadeSmooth"},r.a.createElement(y.a,{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'})),r.a.createElement(h.b.BaseLayer,{name:"Stadia.AlidadeSmoothDark"},r.a.createElement(y.a,{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}))),r.a.createElement(ie,{osmData:this.state.osmData}),r.a.createElement(ge.a,{position:"bottomleft"},r.a.createElement(he,{osmData:this.state.osmDataCounted}))))}}]),n}(r.a.Component);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(de,null)),document.getElementById("root"))},87:function(e,t,a){e.exports=a(145)},92:function(e,t,a){},93:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.d5286c72.chunk.js.map